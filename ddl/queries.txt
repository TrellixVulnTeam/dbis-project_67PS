1) 
getting basic details of a train:
    select * from train where tr_no = "12345";

adding a train :
    INSERT into train values(18519, ' LTT SPL', '', 'LTT', 'special');

delete a train:
    delete from train where tr_no = "12345";

update a train:
    update train set tr_name = "", start = "", dest = "", tr_type = "" where tr_no = "12345";

2) 
assigning coaches and engines:
    
adding a coach :
    INSERT into coach values(588, 72, 'f1', '2S');
delete a coach:
    delete from coach where coach_id = 588;   
adding a engine :
    INSERT into engine values(16789, 'electric');
delete a coach:
    delete from engine where engine_id = 16789;


3)

getting basic details of station:
    select * from station where st_code = "LTT";

adding a station :
    INSERT into station values('LTT', 'Lokamanya Tilak Terminus', 'Mumbai', 10);

delete a station:
    delete from station where st_code = "LTT";

update a station:
    update train set st_name = "", platforms = "" where st_code = "LTT";

Creating a route:
    INSERT into tr_comp values(1, 185199, date '2022-04-04', 5, 16789, 12);
Insert a coach to train route:
    INSERT into tr_coach values(1, 590);
    INSERT into tr_coach values(1, 591);

4) Seat availability in train on a date:

    -- have to return seat no, coach no, price, what about start dest??
    -- for admin purposes
    -- enforce max total seats
    select seat, coach_id, total_seats from (
	select coach.coach_id, total_seats from (
	select coach_id from tr_comp join tr_coach on tr_no = 18519 and date = '2022-04-04' and tr_coach.trcomp_id = tr_comp.trcomp_id 
)
as coaches 
join coach on coaches.coach_id = coach.coach_id
) as coachinfo
join(
		with recursive CTE as  
		(  
			select 1 seat  
			union all  
			select seat +1 from CTE where seat<=120  
		) select * from CTE
	) as seats on seat<=total_seats and seat not in (select berth_no from booking where tr_no = 18519 and date = '2022-04-04')


changing booking status of a seat:

unbooking :

delete from booking where pnr_no = "1";

booking : 

insert into bookig values(1, 18519, date '2022-04-04', 590, 34, 'seater', 50, 'general');



Trains running between start and dest

immediate : 


